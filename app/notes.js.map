{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/components/header_menu.jsx","webpack:///./src/locales sync ^\\.\\/.*$","webpack:///./src/styles/index.styl?d2a0","webpack:///../locale-data/index.js (ignored)","webpack:///./lib/locales (ignored)","webpack:///./lib/locales (ignored)?eeaf","webpack:///zlib (ignored)","webpack:///fs (ignored)","webpack:///http (ignored)","webpack:///https (ignored)","webpack:///./src/components/notes/sharing.jsx","webpack:///./src/components/notes/editor-view.jsx","webpack:///./src/lib/collab/participant.js","webpack:///./src/lib/collab/channel.js","webpack:///./src/lib/collab/provider.js","webpack:///./src/targets/browser/index.jsx","webpack:///./src/components/notes/editor.jsx","webpack:///./src/components/notes/add.jsx","webpack:///./src/components/notes/editor-loading.jsx","webpack:///./src/lib/initFromDom.js","webpack:///./src/targets/vendor/assets/icon.svg","webpack:///./src/components/IsPublic.jsx","webpack:///./src/components/notes/index.jsx","webpack:///./src/components/notes/list.jsx","webpack:///./src/lib/collab/stack-client.js","webpack:///./src/lib/collab/schema.js","webpack:///./src/components/notes/list.styl?6da2","webpack:///./src/components/notes/editor_config.js","webpack:///./src/components/notes/back_from_editing.jsx","webpack:///./node_modules/date-fns/locale sync ^\\.\\/.*\\/index\\.js$","webpack:///./src/components/app.jsx","webpack:///./manifest.webapp","webpack:///./src/lib/utils.js","webpack:///./src/assets/icons/icon_note_empty.svg"],"names":["HeaderMenu","props","className","left","children","right","LocalizedSharingProvider","withLocales","SharingProvider","SharingWidget","file","useMemo","id","fileId","_id","type","_type","useState","showModal","setShowModal","onClick","useCallback","onClose","docId","updateTextareaHeight","target","style","height","scrollHeight","EditorView","defaultValue","onTitleChange","onContentChange","defaultTitle","title","collabProvider","returnUrl","t","titleEl","useRef","onTitleEvent","e","useEffect","current","actions","editorConfig","translate","getParticipant","userId","sessionId","name","avatar","replace","email","minimumBackoff","maximumBackoff","failuresBeforeCatchup","Channel","config","serviceClient","service","eventEmitter","EventEmitter2","resetBackoff","initializeStepsQueue","isSending","backoff","failures","emit","Math","max","min","fn","resolve","window","setTimeout","Promise","queuedStep","undefined","getState","state","localSteps","queued","sendableSteps","steps","enqueueSteps","processQueue","hasQueuedSteps","afterBackoff","dequeueSteps","version","getVersion","length","pushSteps","response","rebaseStepsInQueue","increaseBackoff","doc","join","onStepsCreated","data","onTelepointerUpdated","payload","getSteps","pushTelepointer","evt","handler","on","off","jsonTransformer","JSONTransformer","CollabProvider","userIds","map","step","getUserId","json","console","warn","queueData","participant","participants","get","lastActive","timestamp","updateParticipant","getSessionId","channel","queue","Map","pauseQueue","initialVersion","sid","onReceiveData","onReceiveTelepointer","catchup","encode","usableVersion","collabDoc","connect","tr","oldState","newState","sendSteps","sendTelepointer","Date","getTime","orderedQueue","sort","a","b","aStart","bStart","currentVersion","queueTimeout","programCatchup","clearTimeout","first","firstVersion","expectedVersion","cancelCatchup","shift","processRemoteData","set","joined","now","Array","from","values","filter","p","forEach","delete","removeAllListeners","manifest","require","appLocale","locales","en","react","atlaskit","default","fr","addLocaleData","renderApp","client","isPublic","App","render","document","querySelector","addEventListener","getDataset","appIcon","getDataOrDefault","cozyIconPath","appNamePrefix","cozyAppNamePrefix","name_prefix","appName","cozyAppName","appSlug","cozyAppSlug","slug","appVersion","cozyAppVersion","cozyLocale","protocol","location","token","cozyToken","hasPublicSharecode","CozyClient","uri","cozyDomain","appMetadata","cozy","bar","init","iconPath","lang","replaceTitleOnMobile","cozyClient","Editor","withClient","noteId","userName","getShortNameFromClient","useContext","IsPublic","loading","setLoading","setDoc","setTitle","ServiceClient","docVersion","provider","useNativePlugin","inviteToEditHandler","isInviteToEditButtonSelected","getDoc","onLocalTitleChange","newTitle","value","modifiedTitle","onRemoteTitleChange","onTitleUpdated","history","push","getParentFolderLink","Add","context","setState","getStackClient","fetchJSON","attributes","schema","schemaOrdered","href","generateReturnUrlToNotesIndex","isWorking","handleClick","Component","withRouter","EditorLoading","Link","root","dataset","toTest","defaultData","templateRegex","test","arrToObj","obj","key","val","search","substring","split","varval","reduce","sharecode","React","createContext","EmptyComponent","icon","List","TitleApp","isMobile","breakpoints","TitleAppConnected","withBreakpoints","EmptyPage","sessionSuffix","getMilliseconds","random","stackClient","onRealtimeEvent","bind","realtime","CozyRealtime","resetCallbacks","callbacks","callback","match","unsubscribeAll","toISOString","sub","sessionID","defaultSchema","path","titleDoc","client2server","doctype","onRealtimeCreated","all","subscribe","setCallback","server2client","res","metadata","content","options","headers","stepsDoc","toJSON","reason","meta","ver","status","ev","telepointerDoc","nodes","marks","group","parseDOM","tag","defining","attrs","level","selectable","panelType","cxhtml","inline","atom","originalValue","isNumberColumnEnabled","layout","__autoSize","tableRole","isolating","colspan","rowspan","colwidth","background","ignore","excludes","__confluenceMetadata","inclusive","color","preserveWhitespace","trigger","orderedToObject","ordered","acc","cur","schemaObject","Schema","allowTables","allowRule","allowLists","allowTextColor","allowPanel","BackFromEditing","RoutedEditor","getReturnUrl","params","PrivateContext","Unshared","PublicContext","sharedDocumentId","setSharedDocumentId","fetchData","getSharedDocument","getInstanceOptions","BarCenter","hot","module","url","URL","hostname","floor","returnUrlKey","searchParams","URLSearchParams","append","origin","hash","collection","getOwnPermissions","permissionsData","permissions","Object","getParentFolderId","relationships","parent","getFolderLink","getFullLink","cozyURL","cozySubdomainType","driveSlug","pathForDrive","webUrl","generateWebLink","cozyUrl","subDomainType","nativePath","urlWithUL","generateUniversalLink","fallbackUrl"],"mappings":";AAAA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,gBAAQ,oBAAoB;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,yBAAiB,4BAA4B;AAC7C;AACA;AACA,0BAAkB,2BAA2B;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,iDAAyC,0FAA0F;AACnI;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;AAGA;;AAEA;AACA,yCAAiC;;AAEjC;AACA;AACA;AACA,aAAK;AACL;AACA;AACA;AACA,cAAM;AACN;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAwB,kCAAkC;AAC1D,cAAM;AACN;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,kDAA0C,gCAAgC;AAC1E;AACA;;AAEA;AACA;AACA;AACA,gEAAwD,kBAAkB;AAC1E;AACA,yDAAiD,cAAc;AAC/D;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAyC,iCAAiC;AAC1E,wHAAgH,mBAAmB,EAAE;AACrI;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;AAEA;AACA,kDAA0C,oBAAoB,WAAW;;AAEzE;AACA;AACA;AACA;AACA,wBAAgB,uBAAuB;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D,MAAMsJ,QAAQ,GAAG0C,wDAAU,CAACC,iDAAD,CAA3B;;AACA,MAAIjM,SAAJ,EAAe;AACb,WACE,2DAAC,+DAAD;AACE,UAAI,EAAC,UADP;AAEE,UAAI,EAAEA,SAFR;AAGE,eAAS,EAAC,cAHZ;AAIE,YAAM;AAJR,MADF;AAQD,GATD,MASO,IAAI,CAACsJ,QAAL,EAAe;AACpB,WACE,2DAAC,2DAAD;AACE,UAAI,EAAC,UADP;AAEE,SAAG,EAAE+E,qDAFP;AAGE,QAAE,EAAC,GAHL;AAIE,eAAS,EAAC,cAJZ;AAKE,YAAM;AALR,MADF;AASD,GAVM,MAUA;AACL,WAAO,IAAP;AACD;AACF,C;;;;;;;AC7BD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2B;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AClIA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,IAAM3F,QAAQ,GAAGC,mBAAO,CAAC,MAAD,CAAxB;;AACA;AACA;AAEA;AAEA,IAAM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","file":"app/notes.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// script path function\n \tfunction jsonpScriptSrc(chunkId) {\n \t\treturn __webpack_require__.p + \"\" + ({\"@atlaskit-internal_media-viewer-pdf-viewer\":\"@atlaskit-internal_media-viewer-pdf-viewer\"}[chunkId]||chunkId) + \"/notes.js\"\n \t}\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n \t// This file contains only the entry chunk.\n \t// The chunk loading function for additional chunks\n \t__webpack_require__.e = function requireEnsure(chunkId) {\n \t\tvar promises = [];\n\n\n \t\t// JSONP chunk loading for javascript\n\n \t\tvar installedChunkData = installedChunks[chunkId];\n \t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n \t\t\t// a Promise means \"currently loading\".\n \t\t\tif(installedChunkData) {\n \t\t\t\tpromises.push(installedChunkData[2]);\n \t\t\t} else {\n \t\t\t\t// setup Promise in chunk cache\n \t\t\t\tvar promise = new Promise(function(resolve, reject) {\n \t\t\t\t\tinstalledChunkData = installedChunks[chunkId] = [resolve, reject];\n \t\t\t\t});\n \t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n \t\t\t\t// start chunk loading\n \t\t\t\tvar script = document.createElement('script');\n \t\t\t\tvar onScriptComplete;\n\n \t\t\t\tscript.charset = 'utf-8';\n \t\t\t\tscript.timeout = 120;\n \t\t\t\tif (__webpack_require__.nc) {\n \t\t\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n \t\t\t\t}\n \t\t\t\tscript.src = jsonpScriptSrc(chunkId);\n\n \t\t\t\t// create error before stack unwound to get useful stacktrace later\n \t\t\t\tvar error = new Error();\n \t\t\t\tonScriptComplete = function (event) {\n \t\t\t\t\t// avoid mem leaks in IE.\n \t\t\t\t\tscript.onerror = script.onload = null;\n \t\t\t\t\tclearTimeout(timeout);\n \t\t\t\t\tvar chunk = installedChunks[chunkId];\n \t\t\t\t\tif(chunk !== 0) {\n \t\t\t\t\t\tif(chunk) {\n \t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n \t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n \t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n \t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n \t\t\t\t\t\t\terror.type = errorType;\n \t\t\t\t\t\t\terror.request = realSrc;\n \t\t\t\t\t\t\tchunk[1](error);\n \t\t\t\t\t\t}\n \t\t\t\t\t\tinstalledChunks[chunkId] = undefined;\n \t\t\t\t\t}\n \t\t\t\t};\n \t\t\t\tvar timeout = setTimeout(function(){\n \t\t\t\t\tonScriptComplete({ type: 'timeout', target: script });\n \t\t\t\t}, 120000);\n \t\t\t\tscript.onerror = script.onload = onScriptComplete;\n \t\t\t\tdocument.head.appendChild(script);\n \t\t\t}\n \t\t}\n \t\treturn Promise.all(promises);\n \t};\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// on error function for async loading\n \t__webpack_require__.oe = function(err) { console.error(err); throw err; };\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","import React from 'react'\n\nconst HeaderMenu = props => (\n  <header className={'page-header-menu ' + (props.className || '')}>\n    <div className=\"page-header-menu--left\">{props.left}</div>\n    {props.children}\n    <div className=\"page-header-menu--right\">{props.right}</div>\n  </header>\n)\n\nexport default HeaderMenu\n","var map = {\n\t\"./en\": \"7dT6\",\n\t\"./en.json\": \"7dT6\",\n\t\"./fr\": \"9pOX\",\n\t\"./fr.json\": \"9pOX\"\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = \"/KVF\";","// extracted by mini-css-extract-plugin","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */","import React, { useCallback, useState, useMemo } from 'react'\n\nimport SharingProvider, { ShareButton, ShareModal } from 'cozy-sharing'\nimport withLocales from 'cozy-sharing/dist/withLocales'\n\nconst LocalizedSharingProvider = withLocales(SharingProvider)\n\nexport default function SharingWidget(props) {\n  const file = useMemo(() => {\n    const id = props.fileId || props.file.id || props.file._id\n    const type =\n      (props.file && (props.file.type || props.file._type)) || 'io.cozy.files'\n    return { _id: id, id: id, _type: type, type: type, ...(props.file || {}) }\n  })\n  const [showModal, setShowModal] = useState(false)\n  const onClick = useCallback(() => setShowModal(!showModal), [])\n  const onClose = useCallback(() => setShowModal(false), [])\n  const docId = file.id\n  return (\n    <LocalizedSharingProvider doctype={file.type} documentType=\"Notes\">\n      <ShareButton\n        theme=\"primary\"\n        docId={docId}\n        onClick={onClick}\n        label=\"\"\n        extension=\"narrow\"\n        iconOnly\n      />\n      {showModal && <ShareModal document={file} onClose={onClose} />}\n    </LocalizedSharingProvider>\n  )\n}\n","import React, { useCallback, useRef, useEffect } from 'react'\n\nimport { Editor, WithEditorActions } from '@atlaskit/editor-core'\n\nimport { MainTitle } from 'cozy-ui/react/Text'\nimport Textarea from 'cozy-ui/react/Textarea'\n\nimport editorConfig from './editor_config'\nimport BackFromEditing from './back_from_editing'\nimport HeaderMenu from '../header_menu'\nimport { translate } from 'cozy-ui/react/I18n'\n\nfunction updateTextareaHeight(target) {\n  target.style.height = 'inherit'\n  target.style.height = `${target.scrollHeight}px`\n}\n\nfunction EditorView(props) {\n  const {\n    defaultValue,\n    onTitleChange,\n    onContentChange,\n    defaultTitle,\n    title,\n    collabProvider,\n    returnUrl,\n    t\n  } = props\n\n  const titleEl = useRef(null)\n\n  const onTitleEvent = useCallback(\n    e => {\n      const target = e.target\n      updateTextareaHeight(target)\n      if (onTitleChange) onTitleChange(e)\n    },\n    [onTitleChange]\n  )\n\n  useEffect(() => updateTextareaHeight(titleEl.current), [])\n\n  return (\n    <article className=\"note-article\">\n      <style>#coz-bar {'{ display: none }'}</style>\n      <HeaderMenu\n        left={<BackFromEditing returnUrl={returnUrl} />}\n        className=\"note-header-menu--editing\"\n        right={props.actions}\n      />\n      <section className=\"note-editor-container\">\n        <Editor\n          collabEdit={collabProvider}\n          onChange={onContentChange}\n          defaultValue={defaultValue}\n          {...editorConfig}\n          appearance=\"full-page\"\n          placeholder={t('Notes.EditorView.main_placeholder')}\n          shouldFocus={true}\n          contentComponents={\n            <WithEditorActions\n              render={() => (\n                <MainTitle tag=\"h1\" className=\"note-title\">\n                  <Textarea\n                    ref={titleEl}\n                    rows=\"1\"\n                    fullwidth={true}\n                    value={title}\n                    onChange={onTitleEvent}\n                    placeholder={defaultTitle}\n                    className=\"note-title-input\"\n                  />\n                </MainTitle>\n              )}\n            />\n          }\n        />\n      </section>\n    </article>\n  )\n}\n\nexport default translate()(EditorView)\n","export const getParticipant = ({ userId, sessionId }) => ({\n  userId: sessionId,\n  sessionId: sessionId || userId,\n  name: userId,\n  avatar: `https://api.adorable.io/avatars/80/${userId.replace(\n    /[^a-zA-Z0-9]/g,\n    ''\n  )}.png`,\n  email: `${userId\n    .replace(/\\s+/g, '.')\n    .replace(/[^a-zA-Z0-9.]/g, '')}.toLocaleLowerCase()}@mycozy.cloud`\n})\n","import { EventEmitter2 } from 'eventemitter2'\nimport { getVersion, sendableSteps } from 'prosemirror-collab'\n\nconst minimumBackoff = 128 // 128ms\nconst maximumBackoff = 1000 * 60 * 5 // Max 5 minutes\nconst failuresBeforeCatchup = 4\n\nexport class Channel {\n  constructor(config, serviceClient) {\n    this.config = config\n    this.service = serviceClient\n    this.eventEmitter = new EventEmitter2()\n    this.resetBackoff()\n    this.initializeStepsQueue()\n    this.isSending = false\n  }\n\n  /**\n   * Reset the backoff\n   */\n  resetBackoff() {\n    this.backoff = 0\n    this.failures = 0\n  }\n\n  /**\n   * Increase the backoff\n   */\n  increaseBackoff() {\n    this.failures = this.failures + 1\n    if (this.failures % failuresBeforeCatchup == 0) {\n      this.emit('needcatchup', { failures: this.failures })\n    }\n\n    this.backoff = Math.max(\n      Math.min(this.backoff * 2, maximumBackoff),\n      minimumBackoff\n    )\n  }\n\n  /**\n   * Program something after backoff\n   * @returns {Promise}\n   */\n  afterBackoff() {\n    const fn = resolve => {\n      if (this.backoff < minimumBackoff) {\n        resolve()\n      } else {\n        window.setTimeout(resolve, this.backoff)\n      }\n    }\n    return new Promise(fn)\n  }\n\n  /**\n   * Initialize the steps queue\n   */\n  initializeStepsQueue() {\n    this.queuedStep = undefined\n  }\n\n  /**\n   * Enqueue steps\n   * @param {Function} getState - function to get a current proseMirror state\n   * @param {Object} state - proseMirror state\n   * @param {Object[]} localSteps - local steps to send\n   */\n  enqueueSteps({ getState, state, localSteps }) {\n    this.queuedStep = { getState, state, localSteps }\n  }\n\n  /**\n   * Dequeue steps\n   * @returns {getState, state, localSteps}\n   */\n  dequeueSteps() {\n    const queued = this.queuedStep\n    const getState = queued.getState\n    const state = queued.state || getState()\n    const localSteps = queued.localSteps ||\n      sendableSteps(state) || { steps: [] }\n    this.queuedStep = undefined\n\n    return { getState, state, localSteps }\n  }\n\n  /**\n   * Test if there is a queued step\n   * @returns {boolean}\n   */\n  hasQueuedSteps() {\n    return !!this.queuedStep\n  }\n\n  /**\n   * Rebase steps in queue\n   */\n  rebaseStepsInQueue() {\n    if (this.queuedStep) {\n      this.queuedStep = { getState: this.queuedStep.getState }\n    }\n  }\n\n  /**\n   * Program a push for new steps to the service\n   * @param {Object} state - state from proseMirror internals\n   * @param {Function} getState - returns current proseMirror state\n   * @param {Object} localSteps - localSteps object from proseMirror internals\n   * Today the provider calling `sendSteps` do not fill the localSteps\n   * parameter. This parameter is however provisionned in the demo code from\n   * Atlaskit. I prefer not to remove it, in case we need it later.\n   */\n  async sendSteps(getState, state, localSteps) {\n    this.enqueueSteps({ getState, state, localSteps })\n    await this.processQueue()\n  }\n\n  /**\n   * Send steps in queue\n   */\n  async processQueue() {\n    if (this.isSending) return\n    if (!this.hasQueuedSteps()) return\n\n    this.isSending = true\n    await this.afterBackoff()\n\n    const {\n      getState,\n      state,\n      localSteps: { steps }\n    } = this.dequeueSteps()\n    const version = getVersion(state)\n\n    // Don't send any steps before we're ready.\n    if (typeof version === undefined) return\n    // Nothing to do if no steps\n    if (steps.length === 0) return\n\n    try {\n      const { docId } = this.config\n      const response = await this.service.pushSteps(docId, version, steps)\n      this.rebaseStepsInQueue()\n      this.resetBackoff()\n      this.isSending = false\n      if (response && response.steps && response.steps.length > 0) {\n        this.emit('data', response)\n      }\n    } catch (err) {\n      if (this.hasQueuedSteps()) {\n        // will retry later with more steps\n        this.rebaseStepsInQueue()\n      } else {\n        // send again the current steps\n        this.enqueueSteps({ getState })\n      }\n      this.increaseBackoff()\n      this.isSending = false\n    }\n    // if ever there was something waiting\n    this.processQueue()\n  }\n\n  /**\n   * Connect to pubsub to start receiving events\n   */\n  async connect(version, doc) {\n    const { docId } = this.config\n    this.service.join(docId)\n    this.service.onStepsCreated(docId, data => {\n      this.emit('data', { version: data.version, steps: [data] })\n    })\n    this.service.onTelepointerUpdated(docId, payload => {\n      this.emit('telepointer', payload)\n    })\n    this.eventEmitter.emit('connected', {\n      doc,\n      version\n    })\n  }\n\n  /**\n   * Get steps from version x to latest\n   */\n  async getSteps(version) {\n    const { docId } = this.config\n    return await this.service.getSteps(docId, version)\n  }\n\n  /**\n   * Send telepointer\n   */\n  async sendTelepointer(data) {\n    const { docId } = this.config\n    return await this.service.pushTelepointer(docId, data)\n  }\n\n  /**\n   * Subscribe to events emitted by this channel\n   */\n  on(evt, handler) {\n    this.eventEmitter.on(evt, handler)\n    return this\n  }\n\n  /**\n   * Unsubscribe from events emitted by this channel\n   */\n  off(evt, handler) {\n    this.eventEmitter.off(evt, handler)\n    return this\n  }\n\n  /**\n   * Emit events to subscribers\n   */\n  emit(evt, data) {\n    this.eventEmitter.emit(evt, data)\n    return this\n  }\n}\n","import { EventEmitter2 } from 'eventemitter2'\nimport { getVersion, sendableSteps } from 'prosemirror-collab'\nimport { JSONTransformer } from '@atlaskit/editor-json-transformer'\nimport { Channel } from './channel'\nimport { getParticipant } from './participant'\n\nconst jsonTransformer = new JSONTransformer()\n\n/**\n * The CollabProvider is called directly by the\n * collaboration plugin of proseMirror.\n * It will then use `Channel` as communication\n * layer with the `ServiceClient`, which itself\n * talk to the server.\n */\n\nexport class CollabProvider {\n  constructor(config, serviceClient) {\n    this.config = config\n    this.config['sessionId'] = serviceClient.getSessionId()\n    this.config['userId'] = serviceClient.getUserId()\n    this.serviceClient = serviceClient\n    this.channel = config.channel || new Channel(config, serviceClient)\n    this.eventEmitter = new EventEmitter2()\n    this.queue = []\n    this.getState = () => {}\n    this.participants = new Map()\n    this.pauseQueue = false\n    this.initialVersion = config.version\n    this.pauseQueue = false\n  }\n\n  /**\n   * Initialze the collaboration provider\n   * @param {Function} getState - How to get the proseMirror state\n   */\n  initialize(getState) {\n    this.getState = getState\n    this.channel.on('connected', ({ doc, version }) => {\n      const { sessionId } = this.config\n      this.emit('init', { sid: sessionId, doc, version }) // Set initial document\n      this.emit('connected', { sid: sessionId }) // Let the plugin know that we're connected an ready to go\n    })\n    this.channel.on('data', this.onReceiveData)\n    this.channel.on('telepointer', this.onReceiveTelepointer)\n    this.channel.on('needcatchup', () => this.catchup())\n    const state = getState()\n    const doc = jsonTransformer.encode(state.doc)\n    const usableVersion =\n      this.initialVersion !== undefined ? this.initialVersion : doc.version\n    const collabDoc = { ...doc, version: usableVersion }\n    this.channel.connect(\n      usableVersion,\n      collabDoc\n    )\n\n    return this\n  }\n\n  /**\n   * Send steps from transaction to other participants\n   */\n  send(tr, oldState, newState) {\n    // Ignore transactions without steps\n    if (!tr.steps || !tr.steps.length) {\n      return\n    }\n\n    this.channel.sendSteps(this.getState, newState)\n  }\n\n  /**\n   * Send messages, such as telepointers, to other participants.\n   */\n  sendMessage(data) {\n    if (!data) {\n      return\n    }\n\n    const { type } = data\n    switch (type) {\n      case 'telepointer':\n        this.channel.sendTelepointer({\n          ...data,\n          timestamp: new Date().getTime()\n        })\n    }\n  }\n\n  /**\n   * Queue new steps from the server which should\n   * be applied to the local editor\n   * @param {Object} data - new steps\n   */\n  queueData(data) {\n    const orderedQueue = [...this.queue, data].sort((a, b) => {\n      // order by starting version\n      const aStart = a.version - a.steps.length\n      const bStart = b.version - b.steps.length\n      if (aStart > bStart) return 1\n      if (aStart < bStart) return -1\n      // for same starting version, keep first the one going further\n      if (a.version > b.version) return -1\n      if (a.version > b.version) return 1\n      return 0\n    })\n    this.queue = orderedQueue\n  }\n\n  /**\n   * Catchup after multiple errors\n   * @param {Function} getState - filled when requested from channel\n   */\n  async catchup() {\n    this.pauseQueue = true\n    const currentVersion = getVersion(this.getState())\n    try {\n      const { doc, version, steps } = await this.channel.getSteps(\n        currentVersion\n      )\n      if (doc) {\n        // we lag too much, server did send us the whole document\n        const { sessionId } = this.config\n        // get local steps\n        const { steps: localSteps = [] } = sendableSteps(this.getState()) || {}\n        // Replace local document and version number\n        this.emit('init', { sid: sessionId, doc, version })\n        // Re-aply local steps\n        if (localSteps.length) {\n          this.emit('local-steps', { steps: localSteps })\n        }\n      } else {\n        // we got steps to apply\n        this.onReceiveData({ steps, version }, true)\n      }\n      // processQueue again\n      this.queueTimeout = undefined\n      this.pauseQueue = false\n      this.processQueue()\n    } catch (err) {\n      // something got wrong, try to catchup again\n      // TODO : maybe try to reinit the full doc ?\n      this.pauseQueue = false\n      this.programCatchup()\n    }\n  }\n\n  /**\n   * Something got wrong, we program a catchup,\n   * waiting 1s in case we receive new message\n   * that may resolve our problems\n   */\n  programCatchup() {\n    if (!this.queueTimeout) {\n      this.queueTimeout = window.setTimeout(() => {\n        this.catchup()\n      }, 1000)\n    }\n  }\n\n  /**\n   * When received new messages that resolve a previous\n   * problem: Cancelling the programed catchup\n   */\n  cancelCatchup() {\n    if (this.queueTimeout) {\n      window.clearTimeout(this.queueTimeout)\n      this.queueTimeout = undefined\n    }\n  }\n\n  /**\n   * Process the message queue (new steps from the servers)\n   */\n  processQueue() {\n    if (this.queue.length > 0 && !this.pauseQueue) {\n      let currentVersion = getVersion(this.getState())\n      while (this.queue.length > 0) {\n        const first = this.queue[0]\n        const firstVersion = first.version\n        const expectedVersion = first.steps.length + currentVersion\n        if (firstVersion == expectedVersion) {\n          // process item\n          this.cancelCatchup()\n          this.queue.shift()\n          this.processRemoteData(first)\n          currentVersion = firstVersion\n        } else {\n          if (firstVersion <= expectedVersion) {\n            // item is obsolete, we won't be able to process it\n            this.queue.shift()\n          }\n          if (firstVersion > expectedVersion) {\n            // we miss some steps\n            this.programCatchup()\n            break\n          }\n        }\n      }\n    }\n  }\n\n  /**\n   * Send new steps from the server to the local proseMirror editor\n   * These steps should be previously checked and ordered\n   */\n  processRemoteData = data => {\n    const { version, steps } = data\n\n    if (steps && steps.length) {\n      const userIds = steps.map(\n        step => step.sessionId || this.serviceClient.getUserId(step.sessionId)\n      )\n      this.emit('data', { json: steps, version, userIds })\n    } else {\n      // eslint-disable-next-line no-console\n      console.warn(\n        'Collab.Provider: processRemoteData no steps ? ',\n        steps,\n        data\n      )\n    }\n  }\n\n  /**\n   * We receive new steps  from the server\n   */\n  onReceiveData = data => {\n    this.queueData(data)\n    this.processQueue()\n  }\n\n  /**\n   * We receive new user cursor positions from the server\n   */\n  onReceiveTelepointer = data => {\n    const { sessionId } = data\n    const userId = this.serviceClient.getUserId(sessionId)\n    if (userId === this.config.userId) {\n      return\n    }\n\n    const participant = this.participants.get(userId)\n    if (participant && participant.lastActive > data.timestamp) {\n      return\n    }\n\n    this.updateParticipant(sessionId, data.timestamp)\n    this.emit('telepointer', data)\n  }\n\n  updateParticipant(sessionId, timestamp) {\n    const userId = this.serviceClient.getUserId(sessionId)\n    const participant = getParticipant({ userId, sessionId })\n\n    this.participants.set(userId, {\n      name: '',\n      email: '',\n      avatar: '',\n      sessionId: sessionId,\n      userId: userId,\n      ...participant,\n      lastActive: timestamp\n    })\n\n    const joined = [this.participants.get(userId)]\n\n    // Filter out participants that's been inactive for\n    // more than 5 minutes.\n\n    const now = new Date().getTime()\n    const left = Array.from(this.participants.values()).filter(\n      p => (now - p.lastActive) / 1000 > 300\n    )\n\n    left.forEach(p => this.participants.delete(p.userId))\n    this.emit('presence', { joined, left })\n  }\n\n  /**\n   * Emit events to subscribers\n   */\n  emit(evt, data) {\n    this.eventEmitter.emit(evt, data)\n    return this\n  }\n\n  /**\n   * Subscribe to events emitted by this provider\n   */\n  on(evt, handler) {\n    this.eventEmitter.on(evt, handler)\n    return this\n  }\n\n  /**\n   * Unsubscribe from events emitted by this provider\n   */\n  off(evt, handler) {\n    this.eventEmitter.off(evt, handler)\n    return this\n  }\n\n  /**\n   * Unsubscribe all listeners for this event\n   */\n  unsubscribeAll(evt) {\n    this.eventEmitter.removeAllListeners(evt)\n  }\n}\n\nexport default CollabProvider\n","/* global cozy */\n\nimport 'styles'\n\nimport React from 'react'\nimport { IntlProvider, addLocaleData } from 'react-intl'\nimport CozyClient, { CozyProvider } from 'cozy-client'\nimport { render } from 'react-dom'\nimport { I18n } from 'cozy-ui/react/I18n'\nimport IsPublic from 'components/IsPublic'\nimport {\n  getDataset,\n  getDataOrDefault,\n  hasPublicSharecode\n} from 'lib/initFromDom'\n\nconst manifest = require('../../../manifest.webapp')\n\nlet appLocale\nconst locales = {\n  en: {\n    react: require('react-intl/locale-data/en'),\n    atlaskit: require('@atlaskit/editor-core/dist/cjs/i18n/en').default\n  },\n  fr: {\n    react: require('react-intl/locale-data/fr'),\n    atlaskit: require('@atlaskit/editor-core/dist/cjs/i18n/fr').default\n  }\n}\naddLocaleData(locales.en.react)\naddLocaleData(locales.fr.react)\n\nconst renderApp = function(client, isPublic) {\n  const App = require('components/app').default\n\n  render(\n    <I18n\n      lang={appLocale}\n      dictRequire={appLocale => require(`locales/${appLocale}`)}\n    >\n      <IntlProvider locale={appLocale} messages={locales[appLocale].atlaskit}>\n        <CozyProvider client={client}>\n          <IsPublic.Provider value={isPublic}>\n            <App isPublic={isPublic} />\n          </IsPublic.Provider>\n        </CozyProvider>\n      </IntlProvider>\n    </I18n>,\n    document.querySelector('[role=application]')\n  )\n}\n\n// initial rendering of the application\ndocument.addEventListener('DOMContentLoaded', () => {\n  const data = getDataset()\n\n  const appIcon = getDataOrDefault(\n    data.cozyIconPath,\n    require('../vendor/assets/icon.svg')\n  )\n  const appNamePrefix = getDataOrDefault(\n    data.cozyAppNamePrefix || manifest.name_prefix,\n    ''\n  )\n  const appName = getDataOrDefault(data.cozyAppName, manifest.name)\n  const appSlug = getDataOrDefault(data.cozyAppSlug, manifest.slug)\n  const appVersion = getDataOrDefault(data.cozyAppVersion, manifest.version)\n\n  appLocale = getDataOrDefault(data.cozyLocale, 'en')\n\n  const protocol = window.location ? window.location.protocol : 'https:'\n\n  const token = data.cozyToken\n  const isPublic = hasPublicSharecode()\n\n  // initialize the client to interact with the cozy stack\n  const client = new CozyClient({\n    uri: `${protocol}//${data.cozyDomain}`,\n    token: token,\n    appMetadata: {\n      slug: appSlug,\n      version: appVersion\n    }\n  })\n\n  if (!isPublic) {\n    // initialize the bar, common of all applications, it allows\n    // platform features like apps navigation without doing anything\n    cozy.bar.init({\n      appName: appName,\n      appNamePrefix: appNamePrefix,\n      iconPath: appIcon,\n      lang: appLocale,\n      replaceTitleOnMobile: true,\n      cozyClient: client,\n      isPublic: isPublic\n    })\n  }\n\n  renderApp(client, isPublic)\n})\n","import React, {\n  useCallback,\n  useState,\n  useEffect,\n  useMemo,\n  useContext\n} from 'react'\n\nimport { withClient } from 'cozy-client'\n\nimport EditorView from './editor-view'\nimport EditorLoading from './editor-loading'\nimport SharingWidget from './sharing'\n\nimport IsPublic from './../IsPublic'\n\nimport CollabProvider from '../../lib/collab/provider'\nimport ServiceClient from '../../lib/collab/stack-client'\n\nimport { getShortNameFromClient, getParentFolderLink } from '../../lib/utils.js'\n\nimport { translate } from 'cozy-ui/react/I18n'\n\nconst Editor = translate()(\n  withClient(function(props) {\n    const { client, noteId, t } = props\n    const userName = useMemo(\n      () => props.userName || getShortNameFromClient(client),\n      [props.userName]\n    )\n\n    const isPublic = useContext(IsPublic)\n\n    // alias for later shortcuts\n    const docId = noteId\n    const userId = userName\n    const cozyClient = client\n\n    // state\n    const [loading, setLoading] = useState(true)\n    const [doc, setDoc] = useState(undefined)\n    const [title, setTitle] = useState(undefined)\n\n    // plugins and config\n    const serviceClient = useMemo(\n      () => {\n        return new ServiceClient({ userId, userName, cozyClient })\n      },\n      [noteId]\n    )\n    const docVersion = doc && doc.version\n    //console.log(\"docVersion\", doc, doc && doc.version, docVersion)\n    const collabProvider = useMemo(\n      () => {\n        //console.log(\"collab provider memo\", docVersion)\n        if (docVersion !== undefined) {\n          //console.log('new collabProvider')\n          const provider = new CollabProvider(\n            { version: doc.version, docId },\n            serviceClient\n          )\n          return {\n            useNativePlugin: true,\n            provider: Promise.resolve(provider),\n            inviteToEditHandler: () => undefined,\n            isInviteToEditButtonSelected: false,\n            userId: serviceClient.getSessionId()\n          }\n        } else {\n          return null\n        }\n      },\n      [noteId, docVersion, userName, serviceClient]\n    )\n    //console.log(\"end collabProviderMemo\", collabProvider)\n\n    // fetch the actual note on load\n    useEffect(\n      () => {\n        const fn = async function() {\n          try {\n            if (!loading) {\n              setLoading(true)\n            }\n            const doc = await serviceClient.getDoc(noteId)\n            setTitle(doc.title || '')\n            setDoc(doc)\n          } catch (e) {\n            setTitle(false)\n            setDoc(false)\n          }\n          setLoading(false)\n        }\n        fn()\n      },\n      [noteId]\n    )\n\n    // callbacks\n    const onContentChange = useCallback(() => null, [noteId])\n    const onLocalTitleChange = useCallback(\n      e => {\n        const newTitle = e.target.value\n        const modifiedTitle = newTitle\n        if (title != modifiedTitle) {\n          setTitle(modifiedTitle)\n          serviceClient.setTitle(noteId, modifiedTitle)\n        }\n      },\n      [noteId, setTitle, serviceClient]\n    )\n    const onRemoteTitleChange = useCallback(\n      modifiedTitle => {\n        if (title != modifiedTitle) {\n          setTitle(modifiedTitle)\n        }\n      },\n      [noteId, setTitle]\n    )\n    useMemo(\n      () => {\n        serviceClient.onTitleUpdated(noteId, onRemoteTitleChange)\n      },\n      [onRemoteTitleChange, serviceClient]\n    )\n    // Failure in loading the note ?\n    useEffect(() => {\n      if (!loading && !doc) {\n        // eslint-disable-next-line no-console\n        console.warn(`Could not load note ${noteId}`)\n        props.history.push(`/`)\n      }\n    })\n\n    const returnUrl = useMemo(\n      () => {\n        if (props.returnUrl !== undefined) {\n          return props.returnUrl\n        } else if (doc) {\n          return getParentFolderLink(client, doc.file)\n        } else {\n          return props.returnUrl\n        }\n      },\n      [props.returnUrl, doc]\n    )\n\n    // rendering\n    if (loading || !doc) {\n      return <EditorLoading />\n    } else {\n      return (\n        <EditorView\n          onTitleChange={onLocalTitleChange}\n          onContentChange={onContentChange}\n          collabProvider={collabProvider}\n          defaultTitle={t('Notes.Editor.title_placeholder')}\n          defaultValue={{ ...doc.doc, version: doc.version }}\n          title={title && title.length > 0 ? title : undefined}\n          returnUrl={returnUrl}\n          actions={!isPublic && <SharingWidget fileId={noteId} />}\n        />\n      )\n    }\n  })\n)\n\nexport default Editor\n","import React, { Component } from 'react'\n\nimport { withClient } from 'cozy-client'\n\nimport { withRouter } from 'react-router-dom'\n\nimport Button from 'cozy-ui/react/Button'\nimport { translate } from 'cozy-ui/react/I18n'\n\nimport { schemaOrdered } from 'lib/collab/schema'\nimport { generateReturnUrlToNotesIndex } from 'lib/utils'\n\nclass Add extends Component {\n  constructor(props, context) {\n    super(props, context)\n    // initial component state\n    this.state = {\n      isWorking: false\n    }\n  }\n\n  handleClick = async () => {\n    this.setState(() => {\n      true\n    })\n    const { client: cozyClient } = this.props\n    const { data: doc } = await cozyClient\n      .getStackClient()\n      .fetchJSON('POST', '/notes', {\n        data: {\n          type: 'io.cozy.notes.documents',\n          attributes: {\n            title: '',\n            schema: schemaOrdered\n          }\n        }\n      })\n    this.setState(() => {\n      false\n    })\n\n    window.location.href = generateReturnUrlToNotesIndex(doc)\n  }\n\n  render() {\n    const { isWorking } = this.state\n    const { t, className } = this.props\n    return (\n      <div>\n        <Button\n          onClick={this.handleClick}\n          type=\"submit\"\n          busy={isWorking}\n          icon=\"plus\"\n          label={t('Notes.Add.add_note')}\n          extension=\"narrow\"\n          className={className}\n        />\n      </div>\n    )\n  }\n}\n\n// get mutations from the client to use createDocument\nexport default translate()(withClient(withRouter(Add)))\n","import React from 'react'\n\nimport { Link } from 'react-router-dom'\n\nimport HeaderMenu from '../header_menu'\n\nimport Spinner from 'cozy-ui/react/Spinner'\nimport Button from 'cozy-ui/react/Button'\nimport { translate } from 'cozy-ui/react/I18n'\n\nfunction EditorLoading(props) {\n  const { t } = props\n  const left = (\n    <Button\n      icon=\"back\"\n      tag={Link}\n      to=\"/\"\n      className=\"sto-app-back\"\n      label={t('Notes.EditorLoading.back_to_list')}\n      subtle\n    />\n  )\n  return (\n    <div>\n      <HeaderMenu left={left} />\n      <Spinner size=\"xxlarge\" middle />\n    </div>\n  )\n}\n\nexport default translate()(EditorLoading)\n","export const getDataset = function() {\n  const root = document.querySelector('[role=application]')\n  return root.dataset\n}\n\n// return a defaultData if the template hasn't been replaced by cozy-stack\nexport const getDataOrDefault = function(toTest, defaultData) {\n  const templateRegex = /^\\{\\{\\.[a-zA-Z]*\\}\\}$/ // {{.Example}}\n  return templateRegex.test(toTest) ? defaultData : toTest\n}\nconst arrToObj = (obj = {}, [key, val = true]) => {\n  obj[key] = val\n  return obj\n}\n\nexport const hasPublicSharecode = function() {\n  const { sharecode } = window.location.search\n    .substring(1)\n    .split('&')\n    .map(varval => varval.split('='))\n    .reduce(arrToObj, {})\n  return !!sharecode\n}\n","module.exports = \"/img/icon.svg\";","import React from 'react'\n\nconst IsPublic = React.createContext(false)\nexport default IsPublic\n","import List from './list'\nimport Editor from './editor'\nimport Add from './add'\n\n//\nexport { List, Editor, Add }\n","import React from 'react'\n\nimport { MainTitle } from 'cozy-ui/react/Text'\nimport {\n  Table,\n  TableHead,\n  TableBody,\n  TableRow,\n  TableHeader,\n  TableCell\n} from 'cozy-ui/react/Table'\nimport Empty from 'cozy-ui/react/Empty'\nimport Stack from 'cozy-ui/react/Stack'\nimport { translate } from 'cozy-ui/react/I18n'\nimport { withBreakpoints } from 'cozy-ui/transpiled/react'\n\nimport Add from 'components/notes/add'\nimport icon from 'assets/icons/icon_note_empty.svg'\nimport 'components/notes/list.styl'\n\nconst EmptyComponent = translate()(({ t }) => (\n  <div className=\"empty\">\n    <Empty\n      id=\"empty\"\n      icon={icon}\n      title={t('Notes.Empty.welcome')}\n      text={t('Notes.Empty.after_created')}\n    >\n      <Add className=\"u-mt-1\" />\n    </Empty>\n  </div>\n))\n\nconst List = translate()(({ t }) => (\n  <Table>\n    <TableHead>\n      <TableRow>\n        <TableHeader className=\"tableCellName\">\n          {t('Notes.List.name')}\n        </TableHeader>\n        <TableHeader className=\"tableCell\">\n          {t('Notes.List.updated_at')}\n        </TableHeader>\n        <TableHeader className=\"tableCell\">\n          {t('Notes.List.location')}\n        </TableHeader>\n        <TableHeader className=\"tableCell\">\n          {t('Notes.List.sharings')}\n        </TableHeader>\n      </TableRow>\n    </TableHead>\n    <TableBody>\n      <TableRow className=\"tableRowEmpty\">\n        <TableCell className=\"tableCellEmpty\">\n          <EmptyComponent />\n        </TableCell>\n      </TableRow>\n    </TableBody>\n  </Table>\n))\n\n//We don't not display the Title this way in Mobile.\n//We use Bar.centrer\nconst TitleApp = ({ t, breakpoints: { isMobile } }) => {\n  return isMobile ? null : (\n    <MainTitle className=\"titlePadding u-mt-1\">\n      {t('Notes.List.my_notes')}\n    </MainTitle>\n  )\n}\n\nconst TitleAppConnected = withBreakpoints()(translate()(TitleApp))\n\nconst EmptyPage = () => (\n  <Stack>\n    <TitleAppConnected />\n    <List />\n  </Stack>\n)\nexport default EmptyPage\n","import CozyRealtime from 'cozy-realtime'\n\nimport { schemaOrdered as defaultSchema } from './schema'\n\n// Warning: sessionID on the server, sessionId on the client\n\n/**\n * This is the communication layer with the server\n */\nexport class ServiceClient {\n  constructor(config) {\n    const { userId, cozyClient, schema } = config\n    const now = new Date()\n    const sessionSuffix =\n      now.getTime() + '.' + now.getMilliseconds() + '.' + Math.random()\n    this.sessionId = userId + ':' + sessionSuffix\n    this.userId = this.getUserId(userId)\n    this.cozyClient = cozyClient\n    this.stackClient = cozyClient.getStackClient()\n    this.schema = schema\n    this.onRealtimeEvent = this.onRealtimeEvent.bind(this)\n    this.realtime = new CozyRealtime({ client: cozyClient })\n    this.resetCallbacks()\n  }\n\n  /**\n   * Remove event listeners\n   */\n  resetCallbacks() {\n    this.callbacks = {}\n  }\n\n  /**\n   * Adds event listeners\n   */\n  setCallback(type, id, callback) {\n    this.callbacks[type] = this.callbacks[type] || {}\n    this.callbacks[type][id] = callback\n  }\n\n  /**\n   * @returns {string} Unique id for the user\n   */\n  getUserId(sessionId) {\n    return sessionId ? sessionId.match(/[^:]+/)[0] : this.userId\n  }\n\n  /**\n   * @returns {string} Unique id for the session\n   * It contains the user id + some unique part\n   */\n  getSessionId() {\n    return this.sessionId\n  }\n\n  /**\n   * Close communication with the server\n   * Remove all events listeners\n   */\n  close() {\n    this.realtime.unsubscribeAll()\n    this.resetCallbacks()\n  }\n\n  /**\n   * Get a default title for the note\n   */\n  defaultTitle() {\n    return new Date().toISOString()\n  }\n\n  /**\n   * @param {uuid} id - id of the note\n   * @param {string} sub - sub-path for the server route\n   * @returns {string} path for an API route on the cozy-stack\n   */\n  path(id, sub) {\n    return id ? (sub ? `/notes/${id}/${sub}` : `/notes/${id}`) : '/notes'\n  }\n\n  /**\n   * Convert data from the client format to the server format\n   */\n  client2server(data) {\n    return { sessionID: data.sessionId || this.sessionId, ...data }\n  }\n\n  /**\n   * Convert data from the server format to the client format\n   */\n  server2client(data) {\n    return {\n      sessionId: data.sessionID,\n      userId: this.getUserId(data.sessionID),\n      ...data\n    }\n  }\n\n  /**\n   * Create a new note on the server\n   * @param {string} title\n   * @param {Object} schema\n   */\n  async create(title, schema) {\n    const doc = {\n      data: {\n        type: 'io.cozy.notes.documents',\n        attributes: {\n          title: title || this.defaultTitle(),\n          schema: schema || this.schema || defaultSchema\n        }\n      }\n    }\n    return this.stackClient.fetchJSON('POST', this.path(), doc)\n  }\n\n  /**\n   * Change the title of a note\n   * @param {uuid} docId\n   * @param {string} title\n   */\n  async setTitle(docId, title) {\n    const titleDoc = {\n      data: {\n        type: 'io.cozy.notes.documents',\n        id: docId,\n        attributes: this.client2server({ title: title })\n      }\n    }\n    await this.stackClient.fetchJSON('PUT', this.path(docId, 'title'), titleDoc)\n  }\n\n  /**\n   * Dispatch events from the server\n   * @param {Object} doc - received from the realtime of cozy-stack\n   */\n  onRealtimeEvent(doc) {\n    const id = doc.id || doc._id\n    const type = doc.doctype\n    if (this.callbacks[type] && this.callbacks[type][id]) {\n      return this.callbacks[type][id](doc)\n    } else {\n      // eslint-disable-next-line no-console\n      console.warn('Event not manager', type, id, this.callbacks)\n    }\n  }\n\n  /**\n   * Join a doc - listen to realtime events for this doc\n   * @param {uui} docId\n   */\n  async join(docId) {\n    const onRealtimeCreated = function(doc) {\n      if (doc.id == docId) {\n        return this.onRealtimeEvent(docId)\n      } else {\n        return undefined\n      }\n    }\n    await Promise.all([\n      this.realtime.subscribe(\n        'created',\n        'io.cozy.notes.events',\n        onRealtimeCreated\n      ),\n      this.realtime.subscribe(\n        'updated',\n        'io.cozy.notes.events',\n        docId,\n        this.onRealtimeEvent\n      ),\n      this.realtime.subscribe(\n        'deleted',\n        'io.cozy.notes.events',\n        docId,\n        this.onRealtimeEvent\n      )\n    ])\n  }\n\n  /**\n   * Listen for new steps from the server\n   * @param {uuid} docId\n   * @param {Function} callback\n   */\n  async onStepsCreated(docId, callback) {\n    this.setCallback('io.cozy.notes.steps', docId, data =>\n      callback(this.server2client(data))\n    )\n  }\n\n  /**\n   * Listen for new cursors positions from the server\n   * @param {uuid} docId\n   * @param {Function} callback\n   */\n  async onTelepointerUpdated(docId, callback) {\n    this.setCallback('io.cozy.notes.telepointers', docId, data =>\n      callback(this.server2client(data))\n    )\n  }\n\n  /**\n   * Listen for title changes in the document\n   * @param {uuid} docId\n   * @param {Function} callback\n   */\n  async onTitleUpdated(docId, callback) {\n    this.setCallback('io.cozy.notes.documents', docId, doc => {\n      return !doc.sessionID || doc.sessionID != this.sessionId\n        ? callback(doc.title)\n        : null\n    })\n  }\n\n  /**\n   * Get the full document for a note\n   * @param {uuid} docId\n   */\n  async getDoc(docId) {\n    const res = await this.stackClient.fetchJSON('GET', this.path(docId))\n    return {\n      doc: res.data.attributes.metadata.content,\n      version: res.data.attributes.metadata.version,\n      title: res.data.attributes.metadata.title,\n      file: res.data\n    }\n  }\n\n  /**\n   * Push new local steps to the server\n   * @param {uuid} docId\n   * @param {integer} version\n   * @param {Object[]} steps\n   */\n  async pushSteps(docId, version, steps) {\n    const options = { headers: { 'if-match': version } }\n    const stepsDoc = {\n      data: steps.map(step => ({\n        type: 'io.cozy.notes.steps',\n        attributes: this.client2server(step.toJSON())\n      }))\n    }\n    // will throw in case of 409\n    // which will occurs if the server has more versions than us\n    await this.stackClient.fetchJSON(\n      'PATCH',\n      this.path(docId),\n      stepsDoc,\n      options\n    )\n    return null\n  }\n\n  /**\n   * Fetch steps from the server since the provided versions\n   * @param {uuid} docId\n   * @param {integer} version\n   * @returns {{version, steps}|{doc, version}}\n   * If the server doesn't have all requested steps in memory,\n   * it could returns the whole document in its current version\n   */\n  async getSteps(docId, version) {\n    try {\n      const res = await this.stackClient.fetchJSON(\n        'GET',\n        `${this.path(docId, 'steps')}?Version=${version}`\n      )\n      if (res.data.length == 0) {\n        return { steps: [], version }\n      } else {\n        return {\n          version: res.data[res.data.length - 1].version,\n          steps: res.data.map(step => ({\n            ...step,\n            attributes: this.client2server(step.attributes)\n          }))\n        }\n      }\n    } catch (err) {\n      const response = err.response\n      const data = err.reason && err.reason.data\n      const meta = data && data.attributes && data.attributes.metadata\n      const doc = meta && meta.content\n      const ver = meta && meta.version\n      if (response.status == 412 && doc && ver) {\n        // server does not have all steps we try to fetch\n        // it responds with a full document and a title\n        const ev = 'io.cozy.notes.documents'\n        if (this.callbacks[ev] && this.callbacks[ev][doc.id || doc._id]) {\n          this.callbacks[ev][doc.id || doc._id](doc)\n        }\n        return {\n          doc: doc,\n          version: ver\n        }\n      } else {\n        throw err\n      }\n    }\n  }\n\n  /**\n   * Push new local cursor position to the server\n   * @param {uuid} docId\n   * @param {Object} data\n   */\n  async pushTelepointer(docId, data) {\n    const telepointerDoc = {\n      data: {\n        type: 'io.cozy.notes.telepointers',\n        id: docId,\n        attributes: this.client2server(data)\n      }\n    }\n    return this.stackClient.fetchJSON(\n      'PUT',\n      this.path(docId, 'telepointer'),\n      telepointerDoc\n    )\n  }\n}\nexport default ServiceClient\n","import { Schema } from 'prosemirror-model'\n\n// taken from a debug of @atlakit/editor/editor-core/create-editor/create-editor\n// L139 (new Schema({nodes ,marks}))\n// static because the @atlaskit code base requires a real navigator\n// TODO: either find and exclude plugins requiring interaction\n//       or running a JSDOM faking a navigator\n\nconst nodes = [\n  [\n    'doc',\n    {\n      content: '(block)+',\n      marks: 'link'\n    }\n  ],\n  [\n    'paragraph',\n    {\n      content: 'inline*',\n      group: 'block',\n      marks:\n        'strong code em link strike subsup textColor typeAheadQuery underline',\n      parseDOM: [\n        {\n          tag: 'p'\n        }\n      ]\n    }\n  ],\n  [\n    'text',\n    {\n      group: 'inline'\n    }\n  ],\n  [\n    'bulletList',\n    {\n      group: 'block',\n      content: 'listItem+',\n      parseDOM: [\n        {\n          tag: 'ul'\n        }\n      ]\n    }\n  ],\n  [\n    'orderedList',\n    {\n      group: 'block',\n      content: 'listItem+',\n      parseDOM: [\n        {\n          tag: 'ol'\n        }\n      ]\n    }\n  ],\n  [\n    'listItem',\n    {\n      content: '(paragraph ) (paragraph | bulletList | orderedList )*',\n      defining: true,\n      parseDOM: [\n        {\n          tag: 'li'\n        }\n      ]\n    }\n  ],\n  [\n    'heading',\n    {\n      attrs: {\n        level: {\n          default: 1\n        }\n      },\n      content: 'inline*',\n      group: 'block',\n      defining: true,\n      parseDOM: [\n        {\n          tag: 'h1',\n          attrs: {\n            level: 1\n          }\n        },\n        {\n          tag: 'h2',\n          attrs: {\n            level: 2\n          }\n        },\n        {\n          tag: 'h3',\n          attrs: {\n            level: 3\n          }\n        },\n        {\n          tag: 'h4',\n          attrs: {\n            level: 4\n          }\n        },\n        {\n          tag: 'h5',\n          attrs: {\n            level: 5\n          }\n        },\n        {\n          tag: 'h6',\n          attrs: {\n            level: 6\n          }\n        }\n      ]\n    }\n  ],\n  [\n    'blockquote',\n    {\n      content: 'paragraph+',\n      group: 'block',\n      defining: true,\n      selectable: false,\n      parseDOM: [\n        {\n          tag: 'blockquote'\n        }\n      ]\n    }\n  ],\n  [\n    'rule',\n    {\n      group: 'block',\n      parseDOM: [\n        {\n          tag: 'hr'\n        }\n      ]\n    }\n  ],\n  [\n    'panel',\n    {\n      group: 'block',\n      content: '(paragraph | heading | bulletList | orderedList)+',\n      attrs: {\n        panelType: {\n          default: 'info'\n        }\n      },\n      parseDOM: [\n        {\n          tag: 'div[data-panel-type]'\n        }\n      ]\n    }\n  ],\n  [\n    'confluenceUnsupportedBlock',\n    {\n      group: 'block',\n      attrs: {\n        cxhtml: {\n          default: null\n        }\n      },\n      parseDOM: [\n        {\n          tag: 'div[data-node-type=\"confluenceUnsupportedBlock\"]'\n        }\n      ]\n    }\n  ],\n  [\n    'confluenceUnsupportedInline',\n    {\n      group: 'inline',\n      inline: true,\n      atom: true,\n      attrs: {\n        cxhtml: {\n          default: null\n        }\n      },\n      parseDOM: [\n        {\n          tag: 'div[data-node-type=\"confluenceUnsupportedInline\"]'\n        }\n      ]\n    }\n  ],\n  [\n    'unsupportedBlock',\n    {\n      inline: false,\n      group: 'block',\n      atom: true,\n      selectable: true,\n      attrs: {\n        originalValue: {\n          default: {}\n        }\n      },\n      parseDOM: [\n        {\n          tag: '[data-node-type=\"unsupportedBlock\"]'\n        }\n      ]\n    }\n  ],\n  [\n    'unsupportedInline',\n    {\n      inline: true,\n      group: 'inline',\n      selectable: true,\n      attrs: {\n        originalValue: {\n          default: {}\n        }\n      },\n      parseDOM: [\n        {\n          tag: '[data-node-type=\"unsupportedInline\"]'\n        }\n      ]\n    }\n  ],\n  [\n    'hardBreak',\n    {\n      inline: true,\n      group: 'inline',\n      selectable: false,\n      parseDOM: [\n        {\n          tag: 'br'\n        }\n      ]\n    }\n  ],\n  [\n    'table',\n    {\n      content: 'tableRow+',\n      attrs: {\n        isNumberColumnEnabled: {\n          default: false\n        },\n        layout: {\n          default: 'default'\n        },\n        __autoSize: {\n          default: false\n        }\n      },\n      tableRole: 'table',\n      isolating: true,\n      selectable: false,\n      group: 'block',\n      parseDOM: [\n        {\n          tag: 'table'\n        }\n      ]\n    }\n  ],\n  [\n    'tableHeader',\n    {\n      content:\n        '(paragraph | panel | blockquote | orderedList | bulletList | rule | heading )+',\n      attrs: {\n        colspan: {\n          default: 1\n        },\n        rowspan: {\n          default: 1\n        },\n        colwidth: {\n          default: null\n        },\n        background: {\n          default: null\n        }\n      },\n      tableRole: 'header_cell',\n      isolating: true,\n      marks: '',\n      parseDOM: [\n        {\n          tag: 'th'\n        }\n      ]\n    }\n  ],\n  [\n    'tableRow',\n    {\n      content: '(tableCell | tableHeader)+',\n      tableRole: 'row',\n      parseDOM: [\n        {\n          tag: 'tr'\n        }\n      ]\n    }\n  ],\n  [\n    'tableCell',\n    {\n      content:\n        '(paragraph | panel | blockquote | orderedList | bulletList | rule | heading | unsupportedBlock)+',\n      attrs: {\n        colspan: {\n          default: 1\n        },\n        rowspan: {\n          default: 1\n        },\n        colwidth: {\n          default: null\n        },\n        background: {\n          default: null\n        }\n      },\n      tableRole: 'cell',\n      marks: '',\n      isolating: true,\n      parseDOM: [\n        {\n          tag: '.ak-renderer-table-number-column',\n          ignore: true\n        },\n        {\n          tag: 'td'\n        }\n      ]\n    }\n  ]\n]\n\nconst marks = [\n  [\n    'link',\n    {\n      excludes: 'color',\n      group: 'link',\n      attrs: {\n        href: {},\n        __confluenceMetadata: {\n          default: null\n        }\n      },\n      inclusive: false,\n      parseDOM: [\n        {\n          tag: 'a[href]'\n        }\n      ]\n    }\n  ],\n  [\n    'em',\n    {\n      inclusive: true,\n      group: 'fontStyle',\n      parseDOM: [\n        {\n          tag: 'i'\n        },\n        {\n          tag: 'em'\n        },\n        {\n          style: 'font-style=italic'\n        }\n      ]\n    }\n  ],\n  [\n    'strong',\n    {\n      inclusive: true,\n      group: 'fontStyle',\n      parseDOM: [\n        {\n          tag: 'strong'\n        },\n        {\n          tag: 'b'\n        },\n        {\n          style: 'font-weight'\n        }\n      ]\n    }\n  ],\n  [\n    'textColor',\n    {\n      attrs: {\n        color: {}\n      },\n      inclusive: true,\n      group: 'color',\n      parseDOM: [\n        {\n          style: 'color'\n        }\n      ]\n    }\n  ],\n  [\n    'strike',\n    {\n      inclusive: true,\n      group: 'fontStyle',\n      parseDOM: [\n        {\n          tag: 'strike'\n        },\n        {\n          tag: 's'\n        },\n        {\n          tag: 'del'\n        },\n        {\n          style: 'text-decoration'\n        }\n      ]\n    }\n  ],\n  [\n    'subsup',\n    {\n      inclusive: true,\n      group: 'fontStyle',\n      attrs: {\n        type: {\n          default: 'sub'\n        }\n      },\n      parseDOM: [\n        {\n          tag: 'sub',\n          attrs: {\n            type: 'sub'\n          }\n        },\n        {\n          tag: 'sup',\n          attrs: {\n            type: 'sup'\n          }\n        }\n      ]\n    }\n  ],\n  [\n    'underline',\n    {\n      inclusive: true,\n      group: 'fontStyle',\n      parseDOM: [\n        {\n          tag: 'u'\n        },\n        {\n          style: 'text-decoration'\n        }\n      ]\n    }\n  ],\n  [\n    'code',\n    {\n      excludes: 'fontStyle link searchQuery color',\n      inclusive: true,\n      parseDOM: [\n        {\n          tag: 'span.code',\n          preserveWhitespace: true\n        },\n        {\n          tag: 'code',\n          preserveWhitespace: true\n        },\n        {\n          tag: 'tt',\n          preserveWhitespace: true\n        },\n        {\n          tag: 'span',\n          preserveWhitespace: true\n        }\n      ]\n    }\n  ],\n  [\n    'typeAheadQuery',\n    {\n      excludes: 'searchQuery',\n      inclusive: true,\n      group: 'searchQuery',\n      parseDOM: [\n        {\n          tag: 'span[data-type-ahead-query]'\n        }\n      ],\n      attrs: {\n        trigger: {\n          default: ''\n        }\n      }\n    }\n  ]\n]\n\nfunction orderedToObject(ordered) {\n  return ordered.reduce(function(acc, cur) {\n    acc[cur[0]] = cur[1]\n    return acc\n  }, {})\n}\n\nexport const schemaOrdered = {\n  nodes,\n  marks\n}\n\nexport const schemaObject = {\n  nodes: orderedToObject(nodes),\n  marks: orderedToObject(marks)\n}\n\nconst schema = new Schema(schemaObject)\n\nexport default schema\n","// extracted by mini-css-extract-plugin","// if you change something here,\n// you should update /lib/collab/schema.js\n// otherwise the server part won't work\nconst editorConfig = {\n  allowTables: true,\n  allowRule: true,\n  allowLists: true,\n  allowTextColor: true,\n  allowPanel: true\n}\n\nexport default editorConfig\n","import React, { useContext } from 'react'\nimport { Link } from 'react-router-dom'\nimport { Button, ButtonLink } from 'cozy-ui/react/Button'\nimport IsPublic from '../IsPublic'\n\nexport default function BackFromEditing({ returnUrl }) {\n  const isPublic = useContext(IsPublic)\n  if (returnUrl) {\n    return (\n      <ButtonLink\n        icon=\"previous\"\n        href={returnUrl}\n        className=\"sto-app-back\"\n        subtle\n      />\n    )\n  } else if (!isPublic) {\n    return (\n      <Button\n        icon=\"previous\"\n        tag={Link}\n        to=\"/\"\n        className=\"sto-app-back\"\n        subtle\n      />\n    )\n  } else {\n    return null\n  }\n}\n","var map = {\n\t\"./_lib/build_formatting_tokens_reg_exp/index.js\": \"kOWh\",\n\t\"./ar/build_distance_in_words_locale/index.js\": \"XxX6\",\n\t\"./ar/build_format_locale/index.js\": \"alis\",\n\t\"./ar/index.js\": \"EDRf\",\n\t\"./be/build_distance_in_words_locale/index.js\": \"LQ09\",\n\t\"./be/build_format_locale/index.js\": \"kj7F\",\n\t\"./be/index.js\": \"YEhR\",\n\t\"./bg/build_distance_in_words_locale/index.js\": \"7K3h\",\n\t\"./bg/build_format_locale/index.js\": \"RrdL\",\n\t\"./bg/index.js\": \"isx8\",\n\t\"./ca/build_distance_in_words_locale/index.js\": \"wqqj\",\n\t\"./ca/build_format_locale/index.js\": \"qcV0\",\n\t\"./ca/index.js\": \"Vwa+\",\n\t\"./cs/build_distance_in_words_locale/index.js\": \"ZKDM\",\n\t\"./cs/build_format_locale/index.js\": \"ipyF\",\n\t\"./cs/index.js\": \"dvhP\",\n\t\"./da/build_distance_in_words_locale/index.js\": \"2Mgc\",\n\t\"./da/build_format_locale/index.js\": \"Gned\",\n\t\"./da/index.js\": \"7ur/\",\n\t\"./de/build_distance_in_words_locale/index.js\": \"5IWf\",\n\t\"./de/build_format_locale/index.js\": \"THCn\",\n\t\"./de/index.js\": \"bgw5\",\n\t\"./el/build_distance_in_words_locale/index.js\": \"o/GB\",\n\t\"./el/build_format_locale/index.js\": \"8T9h\",\n\t\"./el/index.js\": \"dH0v\",\n\t\"./en/build_distance_in_words_locale/index.js\": \"LZbM\",\n\t\"./en/build_format_locale/index.js\": \"6DAA\",\n\t\"./en/index.js\": \"Us+F\",\n\t\"./eo/build_distance_in_words_locale/index.js\": \"qrnn\",\n\t\"./eo/build_format_locale/index.js\": \"Bl15\",\n\t\"./eo/index.js\": \"UB7v\",\n\t\"./es/build_distance_in_words_locale/index.js\": \"GEfZ\",\n\t\"./es/build_format_locale/index.js\": \"O+zC\",\n\t\"./es/index.js\": \"/S0t\",\n\t\"./fi/build_distance_in_words_locale/index.js\": \"VHtQ\",\n\t\"./fi/build_format_locale/index.js\": \"Oydx\",\n\t\"./fi/index.js\": \"ndVD\",\n\t\"./fil/build_distance_in_words_locale/index.js\": \"uq4p\",\n\t\"./fil/build_format_locale/index.js\": \"d7hw\",\n\t\"./fil/index.js\": \"pNfm\",\n\t\"./fr/build_distance_in_words_locale/index.js\": \"IzMR\",\n\t\"./fr/build_format_locale/index.js\": \"I3Zg\",\n\t\"./fr/index.js\": \"LKA2\",\n\t\"./hr/build_distance_in_words_locale/index.js\": \"DPvn\",\n\t\"./hr/build_format_locale/index.js\": \"puw3\",\n\t\"./hr/index.js\": \"L9Jq\",\n\t\"./hu/build_distance_in_words_locale/index.js\": \"w2RQ\",\n\t\"./hu/build_format_locale/index.js\": \"/0iD\",\n\t\"./hu/index.js\": \"Nm+E\",\n\t\"./id/build_distance_in_words_locale/index.js\": \"JbvB\",\n\t\"./id/build_format_locale/index.js\": \"0wlw\",\n\t\"./id/index.js\": \"A6C3\",\n\t\"./is/build_distance_in_words_locale/index.js\": \"qzMC\",\n\t\"./is/build_format_locale/index.js\": \"S3yD\",\n\t\"./is/index.js\": \"N4bE\",\n\t\"./it/build_distance_in_words_locale/index.js\": \"MDEp\",\n\t\"./it/build_format_locale/index.js\": \"aUJd\",\n\t\"./it/index.js\": \"hmb4\",\n\t\"./ja/build_distance_in_words_locale/index.js\": \"nNvt\",\n\t\"./ja/build_format_locale/index.js\": \"buui\",\n\t\"./ja/index.js\": \"uAXs\",\n\t\"./ko/build_distance_in_words_locale/index.js\": \"oEw+\",\n\t\"./ko/build_format_locale/index.js\": \"9SQf\",\n\t\"./ko/index.js\": \"iW8+\",\n\t\"./mk/build_distance_in_words_locale/index.js\": \"nmwZ\",\n\t\"./mk/build_format_locale/index.js\": \"htxJ\",\n\t\"./mk/index.js\": \"GzBU\",\n\t\"./nb/build_distance_in_words_locale/index.js\": \"SL1f\",\n\t\"./nb/build_format_locale/index.js\": \"CJ5F\",\n\t\"./nb/index.js\": \"73vv\",\n\t\"./nl/build_distance_in_words_locale/index.js\": \"Uyu0\",\n\t\"./nl/build_format_locale/index.js\": \"doCD\",\n\t\"./nl/index.js\": \"hCQt\",\n\t\"./pl/build_distance_in_words_locale/index.js\": \"FUBD\",\n\t\"./pl/build_format_locale/index.js\": \"nOYf\",\n\t\"./pl/index.js\": \"B6yL\",\n\t\"./pt/build_distance_in_words_locale/index.js\": \"aTPA\",\n\t\"./pt/build_format_locale/index.js\": \"TTT0\",\n\t\"./pt/index.js\": \"gdks\",\n\t\"./ro/build_distance_in_words_locale/index.js\": \"gI+A\",\n\t\"./ro/build_format_locale/index.js\": \"njjO\",\n\t\"./ro/index.js\": \"r2yp\",\n\t\"./ru/build_distance_in_words_locale/index.js\": \"KmPx\",\n\t\"./ru/build_format_locale/index.js\": \"UUBw\",\n\t\"./ru/index.js\": \"nz/o\",\n\t\"./sk/build_distance_in_words_locale/index.js\": \"q2Bs\",\n\t\"./sk/build_format_locale/index.js\": \"9sxn\",\n\t\"./sk/index.js\": \"Wqan\",\n\t\"./sl/build_distance_in_words_locale/index.js\": \"mlv2\",\n\t\"./sl/build_format_locale/index.js\": \"vHkZ\",\n\t\"./sl/index.js\": \"KYSo\",\n\t\"./sr/build_distance_in_words_locale/index.js\": \"LlkS\",\n\t\"./sr/build_format_locale/index.js\": \"RhjJ\",\n\t\"./sr/index.js\": \"7mU3\",\n\t\"./sv/build_distance_in_words_locale/index.js\": \"UNBN\",\n\t\"./sv/build_format_locale/index.js\": \"zTNB\",\n\t\"./sv/index.js\": \"hxgj\",\n\t\"./th/build_distance_in_words_locale/index.js\": \"XAGa\",\n\t\"./th/build_format_locale/index.js\": \"We2s\",\n\t\"./th/index.js\": \"Pk+z\",\n\t\"./tr/build_distance_in_words_locale/index.js\": \"aFZF\",\n\t\"./tr/build_format_locale/index.js\": \"jh7A\",\n\t\"./tr/index.js\": \"3ZWG\",\n\t\"./zh_cn/build_distance_in_words_locale/index.js\": \"KdB7\",\n\t\"./zh_cn/build_format_locale/index.js\": \"l4EP\",\n\t\"./zh_cn/index.js\": \"8tMq\",\n\t\"./zh_tw/build_distance_in_words_locale/index.js\": \"vyyr\",\n\t\"./zh_tw/build_format_locale/index.js\": \"uYH7\",\n\t\"./zh_tw/index.js\": \"QPlQ\"\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = \"nw0P\";","/* global cozy */\n\nimport React, { useState, useEffect, useMemo } from 'react'\nimport { hot } from 'react-hot-loader'\nimport { Route, Switch, HashRouter, withRouter } from 'react-router-dom'\nimport { withClient } from 'cozy-client'\nimport { translate } from 'cozy-ui/transpiled/react/I18n'\nimport { Layout, Main, Content } from 'cozy-ui/react/Layout'\nimport { Sprite as IconSprite } from 'cozy-ui/react/Icon'\nimport Spinner from 'cozy-ui/react/Spinner'\nimport { Empty, withBreakpoints } from 'cozy-ui/transpiled/react'\nimport AppTitle from 'cozy-ui/react/AppTitle'\n\nconst manifest = require('../../manifest.webapp')\nimport { List, Editor } from 'components/notes'\nimport { getReturnUrl, getSharedDocument } from 'lib/utils.js'\n\nimport { getDataOrDefault } from 'lib/initFromDom'\n\nconst RoutedEditor = withRouter(props => {\n  const returnUrl = getReturnUrl()\n\n  return <Editor noteId={props.match.params.id} returnUrl={returnUrl} />\n})\n\nconst PrivateContext = () => (\n  <Switch>\n    <Route path=\"/n/:id\" component={RoutedEditor} />\n    <Route path=\"/\" component={List} />\n  </Switch>\n)\n\nconst Unshared = translate()(({ t }) => (\n  <Empty\n    icon={'warning-circle'}\n    title={t(`Error.unshared_title`)}\n    text={t(`Error.unshared_text`)}\n  />\n))\n\nconst PublicContext = withClient(({ client }) => {\n  const [sharedDocumentId, setSharedDocumentId] = useState(null)\n  const returnUrl = useMemo(() => getReturnUrl(), [])\n\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        const id = await getSharedDocument(client)\n        setSharedDocumentId(id)\n      } catch {\n        setSharedDocumentId(false)\n      }\n    }\n    fetchData()\n  }, [])\n  if (sharedDocumentId) {\n    return <Editor noteId={sharedDocumentId} returnUrl={returnUrl || false} />\n  } else if (sharedDocumentId !== null) {\n    return <Unshared />\n  } else {\n    return <Spinner size=\"xxlarge\" middle />\n  }\n})\n\nconst App = ({ isPublic, breakpoints: { isMobile }, client }) => {\n  let appName = ''\n  if (isMobile) {\n    const data = client.getInstanceOptions()\n    appName = getDataOrDefault(data.cozyAppName, manifest.name)\n  }\n  const { BarCenter } = cozy.bar\n\n  return (\n    <HashRouter>\n      <Layout monoColumn={true}>\n        {isMobile && (\n          <BarCenter>\n            <AppTitle>{appName}</AppTitle>\n          </BarCenter>\n        )}\n        <Main>\n          <Content className=\"app-content\">\n            {isPublic ? <PublicContext /> : <PrivateContext />}\n          </Content>\n        </Main>\n        <IconSprite />\n      </Layout>\n    </HashRouter>\n  )\n}\n\n/*\n  Enable Hot Module Reload using `react-hot-loader` here\n  We enable it here since App is the main root component\n  No need to use it anywhere else, it sould work for all\n  child components\n*/\nexport default hot(module)(withBreakpoints()(withClient(App)))\n","module.exports = {\"name\":\"Notes\",\"name_prefix\":\"Cozy\",\"slug\":\"notes\",\"icon\":\"icon.svg\",\"categories\":[],\"version\":\"1.0.7\",\"licence\":\"AGPL-3.0\",\"editor\":\"Cozy\",\"source\":\"https://github.com/cozy/cozy-notes.git@build\",\"developer\":{\"name\":\"Cozy Cloud\",\"url\":\"https://cozy.io\"},\"locales\":{\"en\":{\"short_description\":\"Cozy Notes is the application for saving, editing and managing all your notes in your Cozy.\",\"long_description\":\"Create your notes, save them and find them in one click in your Cozy. Share ideas with anyone you want in a private and secure space. \\n\\nWith Cozy Notes, you can easily:\\n\\n-- Create your own notes\\n-- Easily edit your notes\\n-- Access your notes directly from your Cozy Drive application.\"},\"fr\":{\"short_description\":\"Cozy Notes est l’application de sauvegarde, d’édition et de gestion de tous vos notes dans votre Cozy.\",\"long_description\":\"Créez vos notes, sauvegardez-les et retrouvez-les en un clin d’oeil dans votre Cozy. Partagez des idées avec qui vous voulez dans un espace privé et sécurisé. \\n\\nAvec Cozy Notes, vous pouvez facilement :\\n\\n- Créer vos propres notes\\n- Éditer facilement vos notes\\n- Accéder à vos notes directement depuis votre application Cozy Drive.\"}},\"screenshots\":[\"screenshots/fr/screenshot01.png\",\"screenshots/fr/screenshot02.png\"],\"langs\":[\"en\",\"fr\"],\"routes\":{\"/\":{\"folder\":\"/\",\"index\":\"index.html\",\"public\":false},\"/public\":{\"folder\":\"/\",\"index\":\"index.html\",\"public\":true}},\"permissions\":{\"apps\":{\"description\":\"Required by the cozy-bar to display the icons of the apps\",\"type\":\"io.cozy.apps\",\"verbs\":[\"GET\"]},\"files\":{\"description\":\"Notes as files\",\"type\":\"io.cozy.files\"}}}","import get from 'lodash/get'\nimport { isMobile } from 'cozy-device-helper'\nimport {\n  generateWebLink,\n  generateUniversalLink\n} from 'cozy-ui/transpiled/react/AppLinker'\n\nexport function getShortNameFromClient(client) {\n  const url = new URL(client.getStackClient().uri)\n  return url.hostname + Math.floor(Math.random() * 100)\n}\n\nconst returnUrlKey = 'returnUrl'\n\nexport function getReturnUrl() {\n  const searchParams = new URLSearchParams(window.location.search)\n  for (const [key, value] of searchParams) {\n    if (key === returnUrlKey) {\n      return value\n    }\n  }\n  return undefined\n}\n\nexport const generateReturnUrlToNotesIndex = doc => {\n  const url = new URL(window.location)\n  url.searchParams.append(returnUrlKey, window.location.origin)\n  url.hash = `#/n/${doc.id}`\n  return url\n}\nexport async function getSharedDocument(client) {\n  const { data: permissionsData } = await client\n    .collection('io.cozy.permissions')\n    .getOwnPermissions()\n\n  const permissions = permissionsData.attributes.permissions\n  // permissions contains several named keys, but the one to use depends on the situation. Using the first one is what we want in all known cases.\n  const sharedDocumentId = get(Object.values(permissions), '0.values.0')\n\n  return sharedDocumentId\n}\n\nexport function getParentFolderId(file) {\n  return file.relationships.parent.data.id\n}\n\nfunction getFolderLink(id) {\n  return `/folder/${id.replace(/-/g, '')}`\n}\n\nfunction getFullLink(client, id) {\n  const cozyURL = new URL(client.getStackClient().uri)\n  const { cozySubdomainType } = client.getInstanceOptions()\n  const driveSlug = 'drive'\n  const pathForDrive = getFolderLink(id)\n\n  const webUrl = generateWebLink({\n    cozyUrl: cozyURL.origin,\n    slug: driveSlug,\n    subDomainType: cozySubdomainType,\n    nativePath: pathForDrive\n  })\n\n  /** If no mobile, then return the fallback directly. No need\n   * for the universal link\n   */\n  if (!isMobile()) {\n    return webUrl\n  }\n\n  const urlWithUL = generateUniversalLink({\n    slug: driveSlug,\n    fallbackUrl: webUrl,\n    nativePath: pathForDrive,\n    subDomainType: cozySubdomainType\n  })\n  return urlWithUL\n}\n\nexport function getParentFolderLink(client, file) {\n  return getFullLink(client, getParentFolderId(file))\n}\n","import SpriteSymbol from \"../../../node_modules/svg-baker-runtime/browser-symbol.js\";\nimport sprite from \"../../../node_modules/svg-sprite-loader/runtime/browser-sprite.build.js\";\nvar symbol = new SpriteSymbol({\n  \"id\": \"icon_note_empty_77efa79dd615f19897a8ed6ec9097298\",\n  \"use\": \"icon_note_empty_77efa79dd615f19897a8ed6ec9097298-usage\",\n  \"viewBox\": \"0 0 171 168\",\n  \"content\": \"<symbol xmlns=\\\"http://www.w3.org/2000/svg\\\" xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\" viewBox=\\\"0 0 171 168\\\" id=\\\"icon_note_empty_77efa79dd615f19897a8ed6ec9097298\\\">\\n    <defs>\\n        <path id=\\\"icon_note_empty_77efa79dd615f19897a8ed6ec9097298_a\\\" d=\\\"M.02.12h36.532v20.674H.02z\\\" />\\n    </defs>\\n    <g fill=\\\"none\\\" fill-rule=\\\"evenodd\\\">\\n        <path fill=\\\"#0DCBCF\\\" d=\\\"M48.367 47.28c3.795-4.135 9.702 2.27 5.938 6.374-8.105 8.832-11.21 22.848-5.617 33.864 6.83 13.453 25.138 8.377 36.387 4.37 5.26-1.871 7.054 6.655 1.834 8.515-15.343 5.464-37.282 8.714-45.942-8.858-7.276-14.767-3.455-32.433 7.4-44.265\\\" />\\n        <path fill=\\\"#D6FAFB\\\" d=\\\"M59.57 16.922c.739-4.162 1.797-8.167 3.764-11.417C66.807-.21 73.009-.675 79.69.561c3.047.47 76.99 11.012 78.873 11.76 6.957 2.843 7.343 8.129 5.837 14.148-.141.971-20.067 84.443-21.43 88.854-1.852 5.978-4.906 11.375-10.609 11.973-5.714.623-75.27-18.403-78.5-19.534-3.954-1.39-5.72-3.632-6.159-6.323-.603-1.443-.376-3.088-.067-5.144.8-5.412 8.228-69.79 11.935-79.373\\\" />\\n        <path fill=\\\"#FFF\\\" d=\\\"M65.047 19.073S64.561 3.301 79.004 5.122c14.443 1.819 89.593 13.951 89.593 13.951v9.972l-15.17 7.281-88.38-17.253z\\\" />\\n        <path fill=\\\"#ACF5F7\\\" d=\\\"M53.622 31.458c.246-4.25.829-8.372 2.413-11.844 2.795-6.122 8.927-7.314 15.747-6.87 3.103.105 6.245.706 8.959 1.155 13.33 2.21 60.933 9.536 62.437 9.936.853.239 3.242 1.012 3.93 1.337 5.173 2.422 4.26 6.643 3.56 12.102-.023.988-10.066 86.694-10.903 91.263-1.155 6.187-3.561 11.933-9.185 13.21-5.636 1.297-77.342-9.496-80.695-10.235-4.111-.928-6.143-2.958-6.897-5.597-.781-1.368-.738-3.034-.675-5.12.157-5.506 8.735-79.333 11.309-89.337\\\" />\\n        <path fill=\\\"#79ECEE\\\" d=\\\"M134.818 99.416c4.069-24.17 8.504-48.43 11.948-72.677.037-.293.209-1.305.35-1.515-.04-.744 2.317.264 4.506.067.068 0 .925-.114.992-.114.716-.138 1.42-.29 2.149-.552 3.554-1.285 4.98-4.27 4.938-7.584-.046-2.971-2.376-4.28-2.285-5.071.047-.427 2.619.902 2.915 1 .405.133 3.131 1.892 4.372 4.065 1.249 2.19.856 5.296.785 8.049-.244 9.277-8.008 66.518-9.51 78.49.026.153-.358 3.1-.546 4.417-.38 2.901-.772 5.807-1.182 8.707-.319 2.271-1.653 15.153-1.929 15.747-3.391 7.361-12.892 9.872-20.513 9.34-.434.025-.851-.016-1.524-.102-.844-.108-2.024.034-3.35-.235.145-2.458 5.937-30.472 7.884-42.032\\\" />\\n        <path fill=\\\"#FFF\\\" d=\\\"M98.24 56.354c3.65-6.425 11.472-9.96 18.354-7.212a10.488 10.488 0 0 1 4.359 2.129c.117.074.22.173.33.253.099.086.2.171.29.253a10.141 10.141 0 0 1 3.012 3.703c.14.243.285.483.408.733.028.087.095.136.12.22.089.233.126.462.208.7.4 1.024.667 2.088.785 3.213.399 2.397.348 4.8-.468 7.371-1.431 4.512-6.871 6.769-11.066 7.466-3.062.503-6.549-.22-9.546-1.52-4.286-1.86-5.61-4.269-6.733-7.469-1.146-3.274-1.878-6.632-.054-9.84M57.875 49.863c1.7-3.323 4.417-5.416 7.697-6.62.072-.048.117-.104.197-.162 2.037-1.45 4.806-2 7.4-1.642 6.076.399 11.603 5.645 13.426 11.64.926 3.055.816 6.827-.747 9.66-2.345 4.249-6.24 6.338-10.86 7.305-7.715 1.625-16.183-3.686-18.103-11.22-.745-2.904-.38-6.293.99-8.961\\\" />\\n        <path fill=\\\"#FFF\\\" d=\\\"M97.573 60.005c.542 1.111 2.285 1.832 3.325 1.161 1.116-.715 1.315-2.42.479-3.462-.451-.557-1.063-.82-1.666-.79a.296.296 0 0 0-.235-.062c-1.392.108-2.635 1.68-1.903 3.153M82.511 58.042c.543 1.11 2.287 1.83 3.325 1.159 1.12-.72 1.318-2.42.479-3.46-.453-.558-1.059-.82-1.668-.791a.295.295 0 0 0-.227-.065c-1.4.11-2.637 1.679-1.909 3.157\\\" />\\n        <path fill=\\\"#FFF\\\" d=\\\"M83.12 55.648c.916-3.33 5.387-5.305 8.553-5.085 3.765.266 8.59 3.494 9.277 7.454.373 2.132-3.201 2.492-3.554.466-.782-4.47-8.893-6.614-10.702-2.003-.036.357-.226.713-.675 1.002-.022.023-.05.037-.07.05-1.412.921-3.292-.203-2.83-1.884\\\" />\\n        <path fill=\\\"#79ECEE\\\" d=\\\"M130.887 48.194c1.972 3.09 7.333 4.648 10.183 2.337 3.064-2.497 3.1-7.587.281-10.373-1.511-1.495-3.399-2.072-5.16-1.798a1.058 1.058 0 0 0-.718-.108c-4.064.775-7.221 5.81-4.586 9.942M127.85 77.94c1.733 2.724 6.45 4.093 8.956 2.058 2.697-2.199 2.723-6.673.244-9.122-1.327-1.316-2.985-1.825-4.536-1.582a.938.938 0 0 0-.63-.094c-3.578.679-6.353 5.109-4.034 8.74M123.467 106.767c1.607 2.793 6.26 4.374 8.854 2.454 2.796-2.074 3.021-6.54.654-9.102-1.267-1.375-2.901-1.949-4.46-1.781a.948.948 0 0 0-.627-.127c-3.603.52-6.573 4.823-4.42 8.556\\\" />\\n        <path fill=\\\"#D6FAFB\\\" d=\\\"M134.92 71.16l.384-.004c3.34-.056 4.832 2.564 4.435 4.87.819 3.035 6.732 4.083 9.188 4.55 3.327.638 6.204.138 7.935-1.695a5.354 5.354 0 0 0 .518-.67c.964-1.44 1.663-2.972 2.485-4.46.207-1.606.413-3.208.626-4.844 1.045.01 7.44.93 7.404 5.085-.061 7.397-4.113 11.963-9.873 13.901.007-.076.018-.156.03-.233a.106.106 0 0 0-.042.013l.012.22c-2.516.844-5.377 1.193-8.431 1.044-7.434-.364-19.518-4.398-19.253-13.56.07-2.467 2.191-4.176 4.582-4.217M155.979 103.575c.026.15-.358 3.097-.548 4.415-.379 2.903-.77 5.807-1.182 8.708-.04.298-.1.792-.173 1.41-.423.111-.846.232-1.267.325-9.933 2.216-23.748-2.264-26.83-12.978-1.387-4.823 5.737-6.845 8.28-3.535 3.25 3.006 6.375 4.279 10.726 4.987 2.315.378 9.589 1.174 10.133-1.001l.86-2.331z\\\" />\\n        <path fill=\\\"#D6FAFB\\\" d=\\\"M155.43 107.99c.19-1.318.575-4.264.549-4.415.141-1.139.343-2.691.587-4.57 1.43-.943 3.35-1.181 4.91-.156 4.028 2.644 5.269 6.247 3.534 10.833-1.791 4.722-6.312 7.18-10.936 8.425.075-.617.134-1.11.175-1.409.412-2.901.803-5.805 1.182-8.708\\\" />\\n        <path fill=\\\"#0DCBCF\\\" d=\\\"M97.295 86.818c.143-.42-.082-.821-.543-.907l-15.969-2.926c-.445-.086-.826.224-.826.667 0 0-.792 8.124 7.2 9.59 7.994 1.46 10.138-6.424 10.138-6.424M106.717 66.413a2.628 2.628 0 0 0 2.9-2.325c.148-1.137.803-3.051 3.438-2.757 2.873.313 2.836 2.714 2.758 3.44a2.632 2.632 0 0 0 2.32 2.906 2.635 2.635 0 0 0 2.902-2.328c.367-3.341-1.301-8.563-7.404-9.24-6.1-.67-8.868 4.061-9.233 7.399a2.623 2.623 0 0 0 2.319 2.905M65.97 60.55a2.618 2.618 0 0 0 2.898-2.323c.154-1.135.809-3.045 3.444-2.756 2.873.32 2.836 2.715 2.758 3.446a2.628 2.628 0 0 0 2.324 2.898 2.633 2.633 0 0 0 2.896-2.326c.369-3.336-1.295-8.561-7.399-9.232-6.107-.682-8.87 4.055-9.24 7.395a2.62 2.62 0 0 0 2.319 2.898M7.328 107.186s-4.037-2.086 6.805-8.374c10.108-5.864 7.278 10.253 7.278 10.253l-14.083-1.88z\\\" />\\n        <path fill=\\\"#DFFCFC\\\" d=\\\"M77.122 128.065c-3.962-7.31-6.318-14.535-8.397-21.528-3.496-11.78-4.837-23.725-10.418-35.926-.384-.842-1.51-1.893-2.359-2.092a1247.17 1247.17 0 0 1-45.203-11.481C5.086 55.485.713 55.304.083 59.109c-.007.039-.016.076-.022.12-.14.995-.046 2.243.353 3.81.19.754.696 1.372 1.281 1.841C4.793 75.29 6.898 85.406 10.32 95.907c3.831 11.75 8.712 23.72 12.591 35.483.415 1.26 1.806 2.668 3.07 2.721.323.013.648.028.971.04 3.006 1.149 30.837 7.319 41.229 8.583 4.412.538 18.182 5.133 17.55-.856-.335-3.168-7.048-10.931-8.61-13.813\\\" />\\n        <path fill=\\\"#0DCBCF\\\" d=\\\"M24.169 106.068c-4.748.862-9.072.078-13.23-2.376-3.782-2.232-6.633 3.978-2.878 6.194a24.375 24.375 0 0 0 16.752 2.983c4.29-.779 3.694-7.587-.644-6.801\\\" />\\n        <path fill=\\\"#0DCBCF\\\" d=\\\"M26.43 113.925c-4.822.208-9-1.152-12.787-4.147-3.445-2.725-7.11 3.043-3.69 5.747a24.362 24.362 0 0 0 16.193 5.225c4.356-.19 4.689-7.017.284-6.825\\\" />\\n        <path fill=\\\"#0DCBCF\\\" d=\\\"M27.7 121.497c-4.773-.725-8.608-2.867-11.746-6.535-2.856-3.338-7.566 1.615-4.73 4.929a24.372 24.372 0 0 0 14.88 8.249c4.313.653 5.952-5.982 1.595-6.643\\\" />\\n        <path fill=\\\"#D6FAFB\\\" d=\\\"M56.82 163.387c2.634 1.707 9.394 3.19 14.841 3.785 14.866 1.625 35.651.773 44.451-2.186 8.875-2.98 9.27-7.505-13.293-9.77-19.21-1.926-41.628.772-46.423 4.818-1.286 1.083-1.211 2.293.423 3.353\\\" />\\n        <path fill=\\\"#FFF\\\" d=\\\"M85.93 121.501l-8.872-2.495 5.144-7.99 53.966-19.197a4.453 4.453 0 0 1 5.686 2.7l.746 2.099a4.45 4.45 0 0 1-2.702 5.686L85.93 121.5z\\\" />\\n        <path fill=\\\"#0DCBCF\\\" d=\\\"M154.388 66.712c-4.389-3.498-9.232 3.746-4.877 7.216 9.374 7.469 14.612 20.835 10.794 32.583-4.663 14.35-23.538 12.171-35.273 9.956-5.483-1.035-5.935 7.667-.492 8.695 16.003 3.021 38.184 2.835 44.015-15.867 4.9-15.715-1.61-32.577-14.167-42.583\\\" />\\n        <path fill=\\\"#0DCBCF\\\" d=\\\"M117.57 120.966c-.858-.505-1.8-.82-2.724-.954.007-.692-.294-1.44-.896-2.045a5.36 5.36 0 0 0-1.042-.795c.604-.217 1.24-.4 1.767-.57 4.603-1.484-.888-7.006-5.49-5.523-4.248 1.372-8.193 3.504-7.248 7.418.244 1.01 1.247 2.234 2.773 2.788.09.031.177.056.268.09.235 1.784 2.018 3.698 4.6 4.72.32.126.656.225.99.326.556 1.45 2.692 2.89 4.895 2.99 5.026.234 8.746-1.607 9.6-4.766.4-1.491-1.568-3.332-3.883-3.906-1.418-.35-2.69-.218-3.61.227\\\" />\\n        <path fill=\\\"#0DCBCF\\\" d=\\\"M116.74 108.083c-2.338-.522-12.208 2.855-5.111 5.063 1.627.505 1.248.814 2.754 1.558-.564.2-1.05.473-1.4.824-2.277.728-2.681 3.583-1.654 5.93 1.48 3.38 2.415 7.939 7.426 7.805 5.597-.148 12.373-6.007 12.023-9.417-.211-2.065-1.65-5.025-4.013-6.767-1.204-.887-7.684-4.475-10.024-4.996\\\" />\\n        <path fill=\\\"#0DCBCF\\\" d=\\\"M118.038 108.505s-11.852-4.477-13.846-1.858c-1.799 2.363-5.817 10.49-3.131 10.95 2.683.463 10.129-2.62 10.129-2.62l6.848-6.472z\\\" />\\n        <g transform=\\\"translate(134.244 38.595)\\\">\\n            <mask id=\\\"icon_note_empty_77efa79dd615f19897a8ed6ec9097298_b\\\" fill=\\\"#fff\\\">\\n                <use xlink:href=\\\"#icon_note_empty_77efa79dd615f19897a8ed6ec9097298_a\\\" />\\n            </mask>\\n            <path fill=\\\"#D6FAFB\\\" d=\\\"M9.325 7.036c.397 5.93 8.7 6.329 13.777 4.795.42-.158.845-.317 1.23-.505a9.225 9.225 0 0 0 1.389-.872c.082-.06.995-.824 1.133-.954 1.086-1.008 2.065-2.238 2.415-3.433.248-2.072.485-4.087.695-5.947a8.54 8.54 0 0 1 2.63 1.137C34 2.191 34.869 3.2 35.499 4.768c.088.213.125.438.17.665.332.608.553 1.271.557 1.963 1.55 5.622-2.602 9.814-8.58 11.908.032-.244.058-.477.09-.717-.01.004-.02.011-.029.015-.018.233-.03.458-.061.702C17.12 22.994.906 20.164.03 7.036c-.365-5.393 8.932-5.393 9.294 0\\\" mask=\\\"url(#icon_note_empty_77efa79dd615f19897a8ed6ec9097298_b)\\\" />\\n        </g>\\n        <path fill=\\\"#ACF5F7\\\" d=\\\"M67.018 83.907a4.967 4.967 0 1 1-9.935 0 4.966 4.966 0 0 1 4.967-4.967 4.967 4.967 0 0 1 4.968 4.967M73.57 105.824a4.967 4.967 0 1 1-9.935 0 4.966 4.966 0 0 1 4.966-4.966 4.967 4.967 0 0 1 4.969 4.966M80.564 124.544a4.967 4.967 0 0 1-4.968 4.966 4.966 4.966 0 0 1-4.967-4.966 4.967 4.967 0 1 1 9.935 0\\\" />\\n    </g>\\n</symbol>\"\n});\nvar result = sprite.add(symbol);\nexport default symbol"],"sourceRoot":""}